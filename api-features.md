# API Features Overview (`/api/v1`)

This document summarizes the features exposed by the backend API to help guide frontend UX and screen design.

Base URL: `/api/v1`

---

## Authentication & HoT (Head of Tribe)

Base: `/hot`

- `GET /hot/me`
  - Get the currently authenticated HoT profile (from the `token` cookie or `Authorization: Bearer` header).
- `GET /hot`
  - List all HoTs (for directory/list screens or admin views).
- `GET /hot/:id`
  - View single HoT profile details.
- `POST /hot/register`
  - Register a new HoT account (name, email, password, tribe, etc.).
- `POST /hot/login`
  - Log in as HoT (sets `token` cookie for protected routes).
- `POST /hot/logout`
  - Log out current HoT and clear the auth cookie.
- `PATCH /hot/:id`
  - Update HoT details (profile edit forms; protected).
- `DELETE /hot/:id`
  - Delete a HoT (protected, admin-only destructive action).

---

## Members

Base: `/member` (most routes require authentication)

- `GET /member`
  - List all members (table/list with filters) — protected.
- `GET /member/:id`
  - View single member profile — protected.
- `POST /member`
  - Create/add a new member (public form, validated via Zod).
- `PATCH /member/:id`
  - Update member details (protected).
- `DELETE /member/:id`
  - Delete a member record (protected).

---

## Sermons

Base: `/sermon`

- `GET /sermon`
  - List all sermons (for sermon library page). Optional `?search=` full‑text search.
- `GET /sermon/:id`
  - View details of a single sermon (title, speaker, date, media, etc.).
- `POST /sermon`
  - Create a new sermon entry (protected; admin/HOT dashboard form).
- `PATCH /sermon/:id`
  - Edit/update sermon details (protected).
- `DELETE /sermon/:id`
  - Delete a sermon (protected).

---

## Events

Base: `/event`

- `GET /event`
  - List all events (for event list/calendar pages). Optional `?search=` full‑text search.
- `GET /event/:id`
  - View details of a single event (title, date, location, description).
- `POST /event`
  - Create a new event (protected; admin/HOT).
- `PATCH /event/:id`
  - Edit/update event details (protected).
- `DELETE /event/:id`
  - Delete an event (protected).

---

## Announcements

Base: `/announcement`

- `GET /announcement`
  - List all announcements (for bulletin/noticeboard). Optional `?search=`.
- `GET /announcement/:id`
  - View a single announcement (title, date, summary, body).
- `POST /announcement`
  - Create a new announcement (protected; admin/HOT).
- `PATCH /announcement/:id`
  - Edit/update announcement details (protected).
- `DELETE /announcement/:id`
  - Delete an announcement (protected).

---

## Prayer Requests

Base: `/prayer-request`

- `POST /prayer-request`
  - Submit a new prayer request (public-facing form; supports anonymous submissions).
- `GET /prayer-request`
  - List all prayer requests (admin/HOT view — status `new`/`read`/`resolved`).
- `GET /prayer-request/:id`
  - View a single prayer request.
- `PATCH /prayer-request/:id`
  - Update prayer request status or details (e.g., mark as “read”, “resolved”; protected).

---

## Testimonies

Base: `/testimony`

- `GET /testimony`
  - List all testimonies (for admin approval or testimony pages).
- `GET /testimony/:id`
  - View a single testimony.
- `POST /testimony`
  - Submit a testimony (public-facing or member form).
  - Used to power testimony listing or highlight sections after approval on the admin side.
- `PATCH /testimony/:id`
  - Update testimony status (`new`/`read`/`resolved`), approval, or featured flags (protected).
- `DELETE /testimony/:id`
  - Delete a testimony (protected).

---

## Activities

Base: `/activity` (protected)

- `GET /activity`
  - List activities generated by the system (e.g., member registrations, new sermons, events, announcements, prayer requests, testimonies, HoT changes).
  - Each record includes a friendly `message` like:
    - `"John Doe just registered"`,
    - `"New sermon added: Walking by Faith"`,
    - `"Prayer request from Anonymous was updated"`.
  - Use this for an admin “Recent Activity” feed or notifications screen.

---

## Health Check / Docs

- `GET /api/v1`
  - Simple “Hello World!” health check endpoint.
- `GET /api-docs`
  - Swagger UI documentation for all endpoints (auto-generated from `@openapi` JSDoc comments).

---

### Suggested Screens / UI Areas

- Auth / HoT: Login, Register, Logout, “My Account” (HoT profile).
- HoTs: HoT list, HoT detail, HoT profile editing, admin HoT management.
- Members: Member list, Member detail, Create/Edit member.
- Sermons: Sermon list, Sermon detail, Create/Edit sermon.
- Events: Event calendar/list, Event detail, Create/Edit event.
- Announcements: Announcement list, Announcement detail, Create/Edit announcement.
- Prayer Requests: Public request form, Admin request list, Request detail & status update.
- Testimonies: Testimony submission form, Admin testimony list/approval, Featured testimonies.
- Activity: Admin recent activity feed/log built from `/activity` messages.
